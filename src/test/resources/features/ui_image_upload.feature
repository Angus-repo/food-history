# language: zh-TW
@ui
功能: 前端圖片上傳功能測試
  作為一個使用者
  我想要能夠上傳和預覽食物圖片
  以便視覺化管理我的食物記錄

  場景: 上傳有效的 JPEG 圖片並顯示預覽
    假如 我已登入系統
    當 我訪問新增食物頁面
    而且 我選擇一個有效的 JPEG 圖片檔案
    那麼 應該顯示圖片預覽
    而且 應該顯示移除圖片按鈕

  場景: 上傳過大的圖片顯示錯誤訊息
    假如 我已登入系統
    當 我訪問新增食物頁面
    而且 我選擇一個超過 20MB 的圖片檔案
    那麼 應該顯示錯誤通知 "圖片檔案太大，請選擇小於 20MB 的圖片"
    而且 圖片輸入框應該被清空

  場景: 上傳不支援的圖片格式顯示錯誤訊息
    假如 我已登入系統
    當 我訪問新增食物頁面
    而且 我選擇一個 BMP 格式的圖片檔案
    那麼 應該顯示錯誤通知 "不支援的圖片格式，請選擇 JPEG、PNG、GIF 或 WebP 格式"
    而且 圖片輸入框應該被清空

  場景: 移除已預覽的圖片
    假如 我已登入系統
    當 我訪問新增食物頁面
    而且 我選擇一個有效的 PNG 圖片檔案
    而且 我點擊移除圖片按鈕
    那麼 圖片預覽應該消失
    而且 應該顯示上傳提示區域
    而且 圖片輸入框應該被清空

  場景: 上傳圖片時顯示進度條
    假如 我已登入系統
    當 我訪問新增食物頁面
    而且 我開始上傳一個大型圖片檔案
    那麼 應該顯示上傳進度條
    而且 進度條應該隨時間增加

  場景: 編輯頁面刪除圖片後更新，回到列表頁應顯示預設圖片
    假如 我已登入系統
    而且 資料庫中有一個帶圖片的食物:
      | id  | name     | carbGrams | imagePath |
      | 901 | 測試食物 | 25.0      | test.jpg  |
    當 我訪問食物列表頁面
    而且 我點擊食物 "測試食物" 的編輯按鈕
    而且 我點擊移除圖片按鈕
    而且 我提交編輯表單
    那麼 我應該看到成功訊息 "食物資料已成功儲存"
    當 我訪問食物列表頁面
    那麼 食物 "測試食物" 應該顯示預設圖片
    而且 預設圖片應該包含圖示
