# language: zh-TW
功能: 食物資料 CRUD 操作
  作為一個使用者
  我想要能夠新增、查詢、修改和刪除食物資料
  以便我可以管理我的食物記錄

  場景: 新增一筆食物資料
    假如 我已登入系統
    當 我訪問新增食物頁面
    而且 我填寫食物資訊:
      | 欄位         | 值      |
      | name         | 白米飯  |
      | carbGrams    | 28.0    |
      | quantity     | 100.0   |
      | unit         | 公克    |
      | notes        | 台灣蓬萊米 |
    而且 我提交食物表單
    那麼 我應該看到成功訊息 "食物資料已成功儲存"
    而且 食物應該被成功儲存到資料庫
    而且 資料庫中應該有 1 筆食物

  場景: 新增食物時必填欄位不能為空
    假如 我已登入系統
    當 我訪問新增食物頁面
    而且 我填寫食物資訊:
      | 欄位         | 值      |
      | name         |         |
      | carbGrams    | 28.0    |
    而且 我提交食物表單
    那麼 應該返回錯誤狀態
    而且 資料庫中應該有 0 筆食物

  場景: 查詢單筆食物資料
    假如 我已登入系統
    而且 資料庫中有以下食物:
      | id  | name         | carbGrams | quantity | unit | notes      |
      | 101 | 麥當勞大麥克 | 45.0      | 1.0      | 個   | 經典漢堡   |
    當 我訪問食物編輯頁面 ID 為 101
    那麼 頁面應該顯示食物名稱 "麥當勞大麥克"
    而且 頁面應該顯示碳水化合物 "45.0"
    而且 頁面應該顯示數量 "1.0"
    而且 頁面應該顯示單位 "個"
    而且 頁面應該顯示備註 "經典漢堡"

  場景: 查詢不存在的食物
    假如 我已登入系統
    當 我訪問食物編輯頁面 ID 為 99999
    那麼 我應該被重定向到食物列表頁面

  場景: 修改食物的基本資訊
    假如 我已登入系統
    而且 資料庫中有以下食物:
      | id  | name     | carbGrams | quantity | unit | notes          |
      | 201 | 富士蘋果 | 14.0      | 1.0      | 個   | 日本進口       |
    當 我訪問食物編輯頁面 ID 為 201
    而且 我修改食物資訊:
      | 欄位         | 值           |
      | name         | 紅富士蘋果   |
      | carbGrams    | 15.5         |
      | notes        | 青森縣產     |
    而且 我提交食物表單
    那麼 我應該看到成功訊息 "食物資料已成功儲存"
    而且 資料庫中的食物 201 名稱應該是 "紅富士蘋果"
    而且 資料庫中的食物 201 碳水化合物應該是 15.5
    而且 資料庫中的食物 201 備註應該是 "青森縣產"

  場景: 修改食物時更新數量和單位
    假如 我已登入系統
    而且 資料庫中有以下食物:
      | id  | name   | carbGrams | quantity | unit | notes |
      | 301 | 燕麥片 | 60.0      | 100.0    | 公克 | 原味  |
    當 我訪問食物編輯頁面 ID 為 301
    而且 我修改食物資訊:
      | 欄位         | 值    |
      | quantity     | 50.0  |
      | unit         | 公克  |
    而且 我提交食物表單
    那麼 資料庫中的食物 301 數量應該是 50.0
    而且 資料庫中的食物 301 單位應該是 "公克"

  場景: 刪除一筆食物資料
    假如 我已登入系統
    而且 資料庫中有以下食物:
      | id  | name     | carbGrams |
      | 401 | 巧克力蛋糕 | 55.0      |
    而且 資料庫中應該有 1 筆食物
    當 我刪除 ID 為 401 的食物
    那麼 刪除請求應該成功
    而且 資料庫中應該有 0 筆食物

  場景: 刪除多筆食物資料
    假如 我已登入系統
    而且 資料庫中有以下食物:
      | id  | name         | carbGrams |
      | 501 | 可口可樂     | 39.0      |
      | 502 | 百事可樂     | 41.0      |
      | 503 | 雪碧         | 38.0      |
    而且 資料庫中應該有 3 筆食物
    當 我刪除 ID 為 501 的食物
    而且 我刪除 ID 為 502 的食物
    那麼 資料庫中應該有 1 筆食物
    而且 資料庫中食物 503 應該仍然存在

  場景: 刪除不存在的食物應該不會報錯
    假如 我已登入系統
    當 我刪除 ID 為 99999 的食物
    那麼 刪除請求應該成功

  場景: 按名稱搜尋食物（單一結果）
    假如 我已登入系統
    而且 資料庫中有以下食物:
      | id  | name         | carbGrams |
      | 601 | 麥當勞大麥克 | 45.0      |
      | 602 | 肯德基炸雞   | 30.0      |
    當 我訪問食物列表頁面
    而且 我輸入關鍵字 "麥當勞" 進行搜尋
    那麼 我應該看到 1 筆搜尋結果
    而且 搜尋結果應該包含 "麥當勞大麥克"

  場景: 按名稱搜尋食物（多個結果）
    假如 我已登入系統
    而且 資料庫中有以下食物:
      | id  | name         | carbGrams |
      | 701 | 麥當勞大麥克 | 45.0      |
      | 702 | 麥當勞薯條   | 35.0      |
      | 703 | 麥當勞可樂   | 39.0      |
      | 704 | 肯德基炸雞   | 30.0      |
    當 我訪問食物列表頁面
    而且 我輸入關鍵字 "麥當勞" 進行搜尋
    那麼 我應該看到 3 筆搜尋結果
    而且 搜尋結果應該包含 "麥當勞大麥克"
    而且 搜尋結果應該包含 "麥當勞薯條"
    而且 搜尋結果應該包含 "麥當勞可樂"
    而且 搜尋結果不應該包含 "肯德基炸雞"

  場景: 搜尋不區分大小寫
    假如 我已登入系統
    而且 資料庫中有以下食物:
      | id  | name    | carbGrams |
      | 801 | Apple   | 14.0      |
      | 802 | Banana  | 23.0      |
    當 我訪問食物列表頁面
    而且 我輸入關鍵字 "apple" 進行搜尋
    那麼 我應該看到 1 筆搜尋結果
    而且 搜尋結果應該包含 "Apple"

  場景: 搜尋無結果
    假如 我已登入系統
    而且 資料庫中有以下食物:
      | id  | name     | carbGrams |
      | 901 | 白米飯   | 28.0      |
    當 我訪問食物列表頁面
    而且 我輸入關鍵字 "披薩" 進行搜尋
    那麼 我應該看到 0 筆搜尋結果

  場景: 空白搜尋顯示所有食物
    假如 我已登入系統
    而且 資料庫中有以下食物:
      | id  | name     | carbGrams |
      | 1001| 白米飯   | 28.0      |
      | 1002| 麵包     | 50.0      |
    當 我訪問食物列表頁面
    而且 我輸入關鍵字 "" 進行搜尋
    那麼 我應該看到 2 筆搜尋結果
